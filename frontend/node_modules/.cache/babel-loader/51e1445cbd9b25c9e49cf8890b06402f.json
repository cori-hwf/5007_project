{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\OneDrive\\\\cori_5007_project_v1\\\\5007_project\\\\frontend\\\\src\\\\App.js\";\nimport React, { useEffect, useState } from \"react\";\nimport Movie from \"./Movie\";\nimport Login from \"./login\";\nimport MovieFeed from \"./MovieFeed\";\nimport MovieSearch from \"./MovieSearch\";\nimport CreateAccount from \"./CreateAccount\";\nimport DetailPage from \"./DetailPage\";\nimport WatchList from \"./WatchList\";\nimport Movie_by_release_date from \"./Movie_by_release_date\";\nimport Movie_by_popularity from \"./Movie_by_popularity\";\nimport { graphQLFetch } from \"./helper/graphqlFetch.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      control_state: 'main_page',\n      searchStuff: \"\",\n      click_movie_info: null,\n      logged_in_user_name: null,\n      token: null,\n      timer: null,\n      user_watchlist: null\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.jump_to_log_in = this.jump_to_log_in.bind(this);\n    this.jump_to_create_account = this.jump_to_create_account.bind(this);\n    this.jump_to_detail_page = this.jump_to_detail_page.bind(this);\n    this.set_log_in_user = this.set_log_in_user.bind(this);\n    this.set_token = this.set_token.bind(this);\n    this.set_log_out = this.set_log_out.bind(this);\n    this.auto_log_out = this.auto_log_out.bind(this);\n    this.if_successful_log_in = this.if_successful_log_in.bind(this);\n    this.fetchMovie = this.fetchMovie.bind(this);\n  }\n\n  jump_to_log_in() {\n    //console.log(this.state.control_state)\n    this.setState({\n      control_state: 'log_in'\n    });\n  }\n\n  jump_to_create_account() {\n    this.setState({\n      control_state: 'create_account'\n    });\n  }\n\n  set_log_in_user(user_name) {\n    this.setState({\n      logged_in_user_name: user_name\n    });\n  }\n\n  set_token(token) {\n    this.setState({\n      token: token\n    });\n  }\n\n  set_log_out(event) {\n    let message = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n    if (message !== null) {\n      alert(message);\n    } else {\n      clearTimeout(this.state.timer);\n    }\n\n    this.setState({\n      logged_in_user_name: null,\n      token: null,\n      control_state: 'main_page',\n      timer: null\n    });\n  }\n\n  auto_log_out(expiration) {\n    const timerId = setTimeout(() => {\n      this.set_log_out(\"\", \"Your login has expired, please login again.\");\n    }, expiration);\n    this.setState({\n      timer: timerId\n    });\n  }\n\n  jump_to_detail_page(move_info) {\n    this.setState({\n      control_state: 'detail_page',\n      click_movie_info: move_info\n    });\n  }\n\n  if_successful_log_in() {\n    this.setState({\n      control_state: 'main_page'\n    });\n  }\n\n  async fetchMovie() {\n    const query = `query {\n        fetchmovie{\n        savedmovie{\n            _id\n            movieid\n            poster_path\n            title\n            vote_average\n        }\n        }\n        }`;\n    const data = await graphQLFetch(query, this.state.token);\n    console.log(\"check backend\");\n    console.log(data.fetchmovie.savedmovie); //the data wanted\n\n    this.setState({\n      user_watchlist: data.fetchmovie.savedmovie\n    });\n  }\n\n  control() {\n    if (this.state.control_state == 'main_page') {\n      return /*#__PURE__*/_jsxDEV(MovieFeed, {\n        jump: this.jump_to_detail_page\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 15\n      }, this);\n    } else if (this.state.control_state == 'log_in') {\n      return /*#__PURE__*/_jsxDEV(Login, {\n        jump: this.jump_to_create_account,\n        set_user: this.set_log_in_user,\n        set_token: this.set_token,\n        handle_expiration: this.auto_log_out,\n        change_to_main: this.if_successful_log_in\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 15\n      }, this);\n    } else if (this.state.control_state == 'search') {\n      return /*#__PURE__*/_jsxDEV(MovieSearch, {\n        searchStuff: this.state.searchStuff,\n        jump: this.jump_to_detail_page\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 15\n      }, this);\n    } else if (this.state.control_state == 'create_account') {\n      return /*#__PURE__*/_jsxDEV(CreateAccount, {\n        jump: this.jump_to_log_in\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 15\n      }, this);\n    } else if (this.state.control_state == 'detail_page') {\n      return /*#__PURE__*/_jsxDEV(DetailPage, {\n        move_info: this.state.click_movie_info,\n        user_name: this.state.logged_in_user_name,\n        token: this.state.token\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 15\n      }, this);\n    } else if (this.state.control_state == 'watch_list') {\n      return /*#__PURE__*/_jsxDEV(WatchList, {\n        user_name: this.state.logged_in_user_name,\n        token: this.state.token,\n        watch_list: this.state.user_watchlist\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 15\n      }, this);\n    } else if (this.state.control_state == 'by_release_date') {\n      return /*#__PURE__*/_jsxDEV(Movie_by_release_date, {\n        jump: this.jump_to_detail_page\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 15\n      }, this);\n    } else if (this.state.control_state == 'by_popularity') {\n      return /*#__PURE__*/_jsxDEV(Movie_by_popularity, {\n        jump: this.jump_to_detail_page\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 15\n      }, this);\n    }\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    const form = document.forms.searchMovies;\n    const searchStuff = form.search.value;\n\n    if (searchStuff.trim()) {\n      this.setState({\n        control_state: 'search'\n      });\n      this.setState({\n        searchStuff: searchStuff\n      }); //console.log(this.state)\n\n      form.search.value = \"\";\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        children: [this.state.logged_in_user_name != null && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"NameButton\",\n          type: \"button\",\n          onClick: () => {\n            this.setState({\n              control_state: 'watch_list'\n            });\n            this.fetchMovie();\n          },\n          children: this.state.logged_in_user_name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 56\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"topButton\",\n          type: \"button\",\n          onClick: () => {\n            this.setState({\n              control_state: 'main_page'\n            });\n          },\n          children: \" Main Page \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 13\n        }, this), this.state.logged_in_user_name == null && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"topButton\",\n          type: \"button\",\n          onClick: () => {\n            this.setState({\n              control_state: 'log_in'\n            });\n          },\n          children: \" Log in \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 56\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dropdown\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"dropbtn\",\n            children: \"Explore More\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dropdown-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"a\", {\n              onClick: () => {\n                this.setState({\n                  control_state: 'by_release_date'\n                });\n              },\n              children: \"Latestest Released\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              onClick: () => {\n                this.setState({\n                  control_state: 'by_popularity'\n                });\n              },\n              children: \"Popularity\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }, this), this.state.logged_in_user_name != null && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"topButton\",\n          type: \"button\",\n          onClick: this.set_log_out,\n          children: \" Log Out \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 56\n        }, this), this.state.logged_in_user_name == null && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"topButton\",\n          type: \"button\",\n          onClick: () => {\n            this.setState({\n              control_state: 'create_account'\n            });\n          },\n          children: \" Create account \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 56\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          name: \"searchMovies\",\n          onSubmit: this.handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"topSearch\",\n            type: \"text\",\n            name: \"search\",\n            placeholder: \"Search...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"topButton\",\n            children: \"Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 11\n      }, this), this.control()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/ASUS/OneDrive/cori_5007_project_v1/5007_project/frontend/src/App.js"],"names":["React","useEffect","useState","Movie","Login","MovieFeed","MovieSearch","CreateAccount","DetailPage","WatchList","Movie_by_release_date","Movie_by_popularity","graphQLFetch","App","Component","constructor","state","control_state","searchStuff","click_movie_info","logged_in_user_name","token","timer","user_watchlist","handleSubmit","bind","jump_to_log_in","jump_to_create_account","jump_to_detail_page","set_log_in_user","set_token","set_log_out","auto_log_out","if_successful_log_in","fetchMovie","setState","user_name","event","message","alert","clearTimeout","expiration","timerId","setTimeout","move_info","query","data","console","log","fetchmovie","savedmovie","control","jump","e","preventDefault","form","document","forms","searchMovies","search","value","trim","render"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,qBAAP,MAAkC,yBAAlC;AACA,OAAOC,mBAAP,MAAgC,uBAAhC;AACA,SAAQC,YAAR,QAA2B,0BAA3B;;;AAEA,MAAMC,GAAN,SAAkBb,KAAK,CAACc,SAAxB,CAAiC;AAC/BC,EAAAA,WAAW,GAAG;AACZ;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,aAAa,EAAE,WADJ;AAEXC,MAAAA,WAAW,EAAE,EAFF;AAGXC,MAAAA,gBAAgB,EAAE,IAHP;AAIXC,MAAAA,mBAAmB,EAAE,IAJV;AAKXC,MAAAA,KAAK,EAAE,IALI;AAMXC,MAAAA,KAAK,EAAE,IANI;AAOXC,MAAAA,cAAc,EAAE;AAPL,KAAb;AASA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,cAAL,GAAsB,KAAKA,cAAL,CAAoBD,IAApB,CAAyB,IAAzB,CAAtB;AACA,SAAKE,sBAAL,GAA8B,KAAKA,sBAAL,CAA4BF,IAA5B,CAAiC,IAAjC,CAA9B;AACA,SAAKG,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBH,IAAzB,CAA8B,IAA9B,CAA3B;AACA,SAAKI,eAAL,GAAuB,KAAKA,eAAL,CAAqBJ,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKK,SAAL,GAAiB,KAAKA,SAAL,CAAeL,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKM,WAAL,GAAmB,KAAKA,WAAL,CAAiBN,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKO,YAAL,GAAoB,KAAKA,YAAL,CAAkBP,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKQ,oBAAL,GAA4B,KAAKA,oBAAL,CAA0BR,IAA1B,CAA+B,IAA/B,CAA5B;AACA,SAAKS,UAAL,GAAkB,KAAKA,UAAL,CAAgBT,IAAhB,CAAqB,IAArB,CAAlB;AACD;;AAEDC,EAAAA,cAAc,GAAE;AACd;AACA,SAAKS,QAAL,CAAc;AAAClB,MAAAA,aAAa,EAAC;AAAf,KAAd;AACD;;AAEDU,EAAAA,sBAAsB,GAAE;AACtB,SAAKQ,QAAL,CAAc;AAAClB,MAAAA,aAAa,EAAC;AAAf,KAAd;AACD;;AAEDY,EAAAA,eAAe,CAACO,SAAD,EAAW;AACxB,SAAKD,QAAL,CAAc;AAACf,MAAAA,mBAAmB,EAAEgB;AAAtB,KAAd;AACD;;AAEDN,EAAAA,SAAS,CAACT,KAAD,EAAO;AACd,SAAKc,QAAL,CAAc;AAACd,MAAAA,KAAK,EAAEA;AAAR,KAAd;AACD;;AAEDU,EAAAA,WAAW,CAACM,KAAD,EAAsB;AAAA,QAAfC,OAAe,uEAAL,IAAK;;AAC/B,QAAIA,OAAO,KAAG,IAAd,EAAmB;AAACC,MAAAA,KAAK,CAACD,OAAD,CAAL;AAAgB,KAApC,MACK;AAACE,MAAAA,YAAY,CAAC,KAAKxB,KAAL,CAAWM,KAAZ,CAAZ;AAAgC;;AACtC,SAAKa,QAAL,CAAc;AAACf,MAAAA,mBAAmB,EAAE,IAAtB;AAA4BC,MAAAA,KAAK,EAAC,IAAlC;AAAwCJ,MAAAA,aAAa,EAAE,WAAvD;AAAmEK,MAAAA,KAAK,EAAC;AAAzE,KAAd;AACD;;AAEDU,EAAAA,YAAY,CAACS,UAAD,EAAY;AACtB,UAAMC,OAAO,GAAGC,UAAU,CAAC,MAAI;AAAC,WAAKZ,WAAL,CAAiB,EAAjB,EAAoB,6CAApB;AAAmE,KAAzE,EAA0EU,UAA1E,CAA1B;AACA,SAAKN,QAAL,CAAc;AAACb,MAAAA,KAAK,EAACoB;AAAP,KAAd;AACD;;AAEDd,EAAAA,mBAAmB,CAACgB,SAAD,EAAW;AAC5B,SAAKT,QAAL,CAAc;AAAClB,MAAAA,aAAa,EAAC,aAAf;AAA8BE,MAAAA,gBAAgB,EAAGyB;AAAjD,KAAd;AACD;;AAEDX,EAAAA,oBAAoB,GAAE;AACpB,SAAKE,QAAL,CAAc;AAAClB,MAAAA,aAAa,EAAC;AAAf,KAAd;AACD;;AAEe,QAAViB,UAAU,GAAE;AAChB,UAAMW,KAAK,GAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAVI;AAWA,UAAMC,IAAI,GAAG,MAAMlC,YAAY,CAACiC,KAAD,EAAO,KAAK7B,KAAL,CAAWK,KAAlB,CAA/B;AACA0B,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACG,UAAL,CAAgBC,UAA5B,EAdgB,CAcwB;;AACxC,SAAKf,QAAL,CAAc;AAACZ,MAAAA,cAAc,EAAEuB,IAAI,CAACG,UAAL,CAAgBC;AAAjC,KAAd;AACD;;AAGDC,EAAAA,OAAO,GAAG;AACR,QAAI,KAAKnC,KAAL,CAAWC,aAAX,IAA4B,WAAhC,EAA6C;AAC3C,0BAAQ,QAAC,SAAD;AAAW,QAAA,IAAI,EAAE,KAAKW;AAAtB;AAAA;AAAA;AAAA;AAAA,cAAR;AACD,KAFD,MAEO,IAAI,KAAKZ,KAAL,CAAWC,aAAX,IAA4B,QAAhC,EAA0C;AAC/C,0BAAQ,QAAC,KAAD;AAAO,QAAA,IAAI,EAAE,KAAKU,sBAAlB;AAA0C,QAAA,QAAQ,EAAI,KAAKE,eAA3D;AAA4E,QAAA,SAAS,EAAI,KAAKC,SAA9F;AAAyG,QAAA,iBAAiB,EAAI,KAAKE,YAAnI;AAAiJ,QAAA,cAAc,EAAI,KAAKC;AAAxK;AAAA;AAAA;AAAA;AAAA,cAAR;AACD,KAFM,MAEA,IAAI,KAAKjB,KAAL,CAAWC,aAAX,IAA4B,QAAhC,EAA0C;AAC/C,0BAAQ,QAAC,WAAD;AAAkBC,QAAAA,WAAW,EAAE,KAAKF,KAAL,CAAWE,WAA1C;AAAuDkC,QAAAA,IAAI,EAAE,KAAKxB;AAAlE;AAAA;AAAA;AAAA;AAAA,cAAR;AACD,KAFM,MAEA,IAAG,KAAKZ,KAAL,CAAWC,aAAX,IAA4B,gBAA/B,EAAgD;AACrD,0BAAQ,QAAC,aAAD;AAAe,QAAA,IAAI,EAAE,KAAKS;AAA1B;AAAA;AAAA;AAAA;AAAA,cAAR;AACD,KAFM,MAEA,IAAG,KAAKV,KAAL,CAAWC,aAAX,IAA4B,aAA/B,EAA6C;AAClD,0BAAQ,QAAC,UAAD;AAAY,QAAA,SAAS,EAAI,KAAKD,KAAL,CAAWG,gBAApC;AAAsD,QAAA,SAAS,EAAI,KAAKH,KAAL,CAAWI,mBAA9E;AAAmG,QAAA,KAAK,EAAE,KAAKJ,KAAL,CAAWK;AAArH;AAAA;AAAA;AAAA;AAAA,cAAR;AACD,KAFM,MAED,IAAG,KAAKL,KAAL,CAAWC,aAAX,IAA4B,YAA/B,EAA4C;AAChD,0BAAQ,QAAC,SAAD;AAAW,QAAA,SAAS,EAAI,KAAKD,KAAL,CAAWI,mBAAnC;AAAwD,QAAA,KAAK,EAAE,KAAKJ,KAAL,CAAWK,KAA1E;AAAiF,QAAA,UAAU,EAAE,KAAKL,KAAL,CAAWO;AAAxG;AAAA;AAAA;AAAA;AAAA,cAAR;AACD,KAFK,MAEA,IAAG,KAAKP,KAAL,CAAWC,aAAX,IAA4B,iBAA/B,EAAkD;AACtD,0BAAQ,QAAC,qBAAD;AAAuB,QAAA,IAAI,EAAE,KAAKW;AAAlC;AAAA;AAAA;AAAA;AAAA,cAAR;AACD,KAFK,MAEA,IAAG,KAAKZ,KAAL,CAAWC,aAAX,IAA4B,eAA/B,EAA+C;AACnD,0BAAQ,QAAC,mBAAD;AAAqB,QAAA,IAAI,EAAE,KAAKW;AAAhC;AAAA;AAAA;AAAA;AAAA,cAAR;AACD;AACF;;AAEDJ,EAAAA,YAAY,CAAC6B,CAAD,EAAI;AACdA,IAAAA,CAAC,CAACC,cAAF;AACA,UAAMC,IAAI,GAAGC,QAAQ,CAACC,KAAT,CAAeC,YAA5B;AACA,UAAMxC,WAAW,GAAGqC,IAAI,CAACI,MAAL,CAAYC,KAAhC;;AACA,QAAG1C,WAAW,CAAC2C,IAAZ,EAAH,EAAuB;AACrB,WAAK1B,QAAL,CAAc;AAAClB,QAAAA,aAAa,EAAE;AAAhB,OAAd;AACA,WAAKkB,QAAL,CAAc;AAACjB,QAAAA,WAAW,EAAEA;AAAd,OAAd,EAFqB,CAGrB;;AACAqC,MAAAA,IAAI,CAACI,MAAL,CAAYC,KAAZ,GAAoB,EAApB;AACD;AACF;;AAEDE,EAAAA,MAAM,GAAG;AACP,wBACI;AAAA,8BACE;AAAA,mBACG,KAAK9C,KAAL,CAAWI,mBAAX,IAAkC,IAAlC,iBAA0C;AAAQ,UAAA,SAAS,EAAC,YAAlB;AAA+B,UAAA,IAAI,EAAC,QAApC;AAA6C,UAAA,OAAO,EAAE,MAAM;AAAC,iBAAKe,QAAL,CAAc;AAAClB,cAAAA,aAAa,EAAE;AAAhB,aAAd;AAA8C,iBAAKiB,UAAL;AAAkB,WAA7H;AAAA,oBAAiI,KAAKlB,KAAL,CAAWI;AAA5I;AAAA;AAAA;AAAA;AAAA,gBAD7C,eAEE;AAAQ,UAAA,SAAS,EAAC,WAAlB;AAA8B,UAAA,IAAI,EAAC,QAAnC;AAA4C,UAAA,OAAO,EAAE,MAAK;AAAC,iBAAKe,QAAL,CAAc;AAAClB,cAAAA,aAAa,EAAE;AAAhB,aAAd;AAA4C,WAAvG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,EAGG,KAAKD,KAAL,CAAWI,mBAAX,IAAkC,IAAlC,iBAA0C;AAAQ,UAAA,SAAS,EAAC,WAAlB;AAA8B,UAAA,IAAI,EAAC,QAAnC;AAA4C,UAAA,OAAO,EAAE,MAAK;AAAC,iBAAKe,QAAL,CAAc;AAAClB,cAAAA,aAAa,EAAE;AAAhB,aAAd;AAAyC,WAApG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAH7C,eAKE;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA,kCACE;AAAQ,YAAA,SAAS,EAAC,SAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAGE;AAAK,YAAA,SAAS,EAAC,kBAAf;AAAA,oCACE;AAAG,cAAA,OAAO,EAAE,MAAM;AAAC,qBAAKkB,QAAL,CAAc;AAAClB,kBAAAA,aAAa,EAAE;AAAhB,iBAAd;AAAkD,eAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAG,cAAA,OAAO,EAAE,MAAM;AAAC,qBAAKkB,QAAL,CAAc;AAAClB,kBAAAA,aAAa,EAAE;AAAhB,iBAAd;AAAgD,eAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,gBALF,EAcG,KAAKD,KAAL,CAAWI,mBAAX,IAAkC,IAAlC,iBAA0C;AAAQ,UAAA,SAAS,EAAC,WAAlB;AAA8B,UAAA,IAAI,EAAC,QAAnC;AAA4C,UAAA,OAAO,EAAE,KAAKW,WAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAd7C,EAeG,KAAKf,KAAL,CAAWI,mBAAX,IAAkC,IAAlC,iBAA0C;AAAQ,UAAA,SAAS,EAAC,WAAlB;AAA8B,UAAA,IAAI,EAAC,QAAnC;AAA4C,UAAA,OAAO,EAAE,MAAK;AAAC,iBAAKe,QAAL,CAAc;AAAClB,cAAAA,aAAa,EAAE;AAAhB,aAAd;AAAiD,WAA5G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAf7C,eAgBE;AAAM,UAAA,IAAI,EAAC,cAAX;AAA0B,UAAA,QAAQ,EAAE,KAAKO,YAAzC;AAAA,kCACE;AAAO,YAAA,SAAS,EAAC,WAAjB;AAA6B,YAAA,IAAI,EAAC,MAAlC;AAAyC,YAAA,IAAI,EAAC,QAA9C;AAAuD,YAAA,WAAW,EAAC;AAAnE;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAQ,YAAA,SAAS,EAAC,WAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAhBF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAsBG,KAAK2B,OAAL,EAtBH;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AA0BD;;AA1I8B;;AA8IjC,eAAetC,GAAf","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport Movie from \"./Movie\";\r\nimport Login from \"./login\";\r\nimport MovieFeed from \"./MovieFeed\";\r\nimport MovieSearch from \"./MovieSearch\";\r\nimport CreateAccount from \"./CreateAccount\";\r\nimport DetailPage from \"./DetailPage\";\r\nimport WatchList from \"./WatchList\";\r\nimport Movie_by_release_date from \"./Movie_by_release_date\";\r\nimport Movie_by_popularity from \"./Movie_by_popularity\";\r\nimport {graphQLFetch} from \"./helper/graphqlFetch.js\";\r\n\r\nclass App extends React.Component{\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      control_state: 'main_page',\r\n      searchStuff: \"\",\r\n      click_movie_info: null,\r\n      logged_in_user_name: null,\r\n      token: null,\r\n      timer: null,\r\n      user_watchlist: null\r\n    }\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.jump_to_log_in = this.jump_to_log_in.bind(this);\r\n    this.jump_to_create_account = this.jump_to_create_account.bind(this)\r\n    this.jump_to_detail_page = this.jump_to_detail_page.bind(this)\r\n    this.set_log_in_user = this.set_log_in_user.bind(this)\r\n    this.set_token = this.set_token.bind(this)  \r\n    this.set_log_out = this.set_log_out.bind(this)\r\n    this.auto_log_out = this.auto_log_out.bind(this)\r\n    this.if_successful_log_in = this.if_successful_log_in.bind(this)\r\n    this.fetchMovie = this.fetchMovie.bind(this)\r\n  }\r\n\r\n  jump_to_log_in(){\r\n    //console.log(this.state.control_state)\r\n    this.setState({control_state:'log_in'})\r\n  }\r\n\r\n  jump_to_create_account(){\r\n    this.setState({control_state:'create_account'})\r\n  }\r\n\r\n  set_log_in_user(user_name){\r\n    this.setState({logged_in_user_name: user_name})\r\n  }\r\n\r\n  set_token(token){\r\n    this.setState({token: token})\r\n  }\r\n\r\n  set_log_out(event,message = null){\r\n    if (message!==null){alert(message);}\r\n    else {clearTimeout(this.state.timer);}\r\n    this.setState({logged_in_user_name: null, token:null, control_state: 'main_page',timer:null})\r\n  }\r\n\r\n  auto_log_out(expiration){\r\n    const timerId = setTimeout(()=>{this.set_log_out(\"\",\"Your login has expired, please login again.\")},expiration);\r\n    this.setState({timer:timerId})\r\n  }\r\n\r\n  jump_to_detail_page(move_info){\r\n    this.setState({control_state:'detail_page', click_movie_info : move_info})\r\n  }\r\n\r\n  if_successful_log_in(){\r\n    this.setState({control_state:'main_page'})\r\n  }\r\n\r\n  async fetchMovie(){\r\n    const query = `query {\r\n        fetchmovie{\r\n        savedmovie{\r\n            _id\r\n            movieid\r\n            poster_path\r\n            title\r\n            vote_average\r\n        }\r\n        }\r\n        }`;\r\n    const data = await graphQLFetch(query,this.state.token);\r\n    console.log(\"check backend\")\r\n    console.log(data.fetchmovie.savedmovie) //the data wanted\r\n    this.setState({user_watchlist: data.fetchmovie.savedmovie})\r\n  }\r\n\r\n\r\n  control() {\r\n    if (this.state.control_state == 'main_page') {\r\n      return (<MovieFeed jump={this.jump_to_detail_page}/>)\r\n    } else if (this.state.control_state == 'log_in') {\r\n      return (<Login jump={this.jump_to_create_account} set_user = {this.set_log_in_user} set_token = {this.set_token} handle_expiration = {this.auto_log_out} change_to_main = {this.if_successful_log_in}/>)\r\n    } else if (this.state.control_state == 'search') {\r\n      return (<MovieSearch {...{searchStuff: this.state.searchStuff, jump: this.jump_to_detail_page}}/>)\r\n    } else if(this.state.control_state == 'create_account'){\r\n      return (<CreateAccount jump={this.jump_to_log_in}/>)\r\n    } else if(this.state.control_state == 'detail_page'){\r\n      return (<DetailPage move_info = {this.state.click_movie_info} user_name = {this.state.logged_in_user_name} token={this.state.token}/>)\r\n    }else if(this.state.control_state == 'watch_list'){\r\n      return (<WatchList user_name = {this.state.logged_in_user_name} token={this.state.token} watch_list={this.state.user_watchlist}/>)\r\n    }else if(this.state.control_state == 'by_release_date') {\r\n      return (<Movie_by_release_date jump={this.jump_to_detail_page}/>)\r\n    }else if(this.state.control_state == 'by_popularity'){\r\n      return (<Movie_by_popularity jump={this.jump_to_detail_page}/>)\r\n    }\r\n  }\r\n\r\n  handleSubmit(e) {\r\n    e.preventDefault();\r\n    const form = document.forms.searchMovies;\r\n    const searchStuff = form.search.value\r\n    if(searchStuff.trim()) {\r\n      this.setState({control_state: 'search'})\r\n      this.setState({searchStuff: searchStuff})\r\n      //console.log(this.state)\r\n      form.search.value = \"\";\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n        <div>\r\n          <header>\r\n            {this.state.logged_in_user_name != null && <button className=\"NameButton\" type=\"button\" onClick={() => {this.setState({control_state: 'watch_list'}); this.fetchMovie()} }>{this.state.logged_in_user_name}</button>}\r\n            <button className=\"topButton\" type=\"button\" onClick={() =>{this.setState({control_state: 'main_page'})}}> Main Page </button>\r\n            {this.state.logged_in_user_name == null && <button className=\"topButton\" type=\"button\" onClick={() =>{this.setState({control_state: 'log_in'})}}> Log in </button>}\r\n\r\n            <div className=\"dropdown\">\r\n              <button className=\"dropbtn\">Explore More\r\n              </button>\r\n              <div className=\"dropdown-content\">\r\n                <a onClick={() => {this.setState({control_state: 'by_release_date'})}}>Latestest Released</a>\r\n                <a onClick={() => {this.setState({control_state: 'by_popularity'})}}>Popularity</a>\r\n              </div>\r\n            </div>\r\n\r\n            {this.state.logged_in_user_name != null && <button className=\"topButton\" type=\"button\" onClick={this.set_log_out}> Log Out </button>}\r\n            {this.state.logged_in_user_name == null && <button className=\"topButton\" type=\"button\" onClick={() =>{this.setState({control_state: 'create_account'})}}> Create account </button>}\r\n            <form name=\"searchMovies\" onSubmit={this.handleSubmit}>\r\n              <input className=\"topSearch\" type=\"text\" name=\"search\" placeholder=\"Search...\" />\r\n              <button className=\"topButton\">Search</button>\r\n            </form>\r\n          </header>\r\n          {this.control()}\r\n        </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}